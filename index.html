<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>KIPP SMILEY</title>

<style>
/* (STYLE UNVER√ÑNDERT BIS AUF BUTTONTEXT & FAUSTROTATION) */

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
  background: #121826;
  color: #f5f5f5;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  padding: 20px 12px;
}

.smiley-face, .smiley-hand {
  cursor: pointer;
}

.selected {
  outline: 3px solid #facc15;
  border-radius: 999px;
}

/* Faust immer richtig gedreht */
.smiley-hand.fist {
  transform: rotate(-90deg) !important;
}

/* KIPP STOPP Anzeige */
.kippstopp {
  font-size: 2rem;
  color: #facc15;
  font-weight: 900;
  margin-top: 10px;
  text-shadow: 2px 2px 0 black;
}

</style>
</head>

<body>

<div class="app">

<h1>KIPP SMILEY</h1>

<div class="card-wrapper">
  <div class="card">
    <div class="card-inner">

      <div class="combo-row" id="comboRow" style="display:none;">
        <div class="smiley-hand" id="smileyHand">üñê</div>
        <div class="smiley-face" id="smileyFace">üòÄ</div>
      </div>

      <div class="kippstopp" id="kippStopText" style="display:none;">
        KIPP STOPP
      </div>

      <div class="card-message" id="cardMessage">
        üìô = Scrollbare Spielanleitung.<br><br>
        ‚ò∞ = PDF-Spielanleitung herunterladen.
      </div>

    </div>
  </div>
</div>

<div class="buttons-row">
  <button class="btn btn-primary" id="btnErkippt">erkippt</button>
  <button class="btn btn-secondary" id="btnNicht">nicht erkippt</button>
</div>

<div class="score-area">
  <div class="score-big" id="pointsDisplay">0</div>

  <div class="start-row">
    <button class="start-btn start-btn-start" id="btnStart">starten</button>
    <button class="start-btn start-btn-close" id="btnClose">schlie√üen</button>
  </div>

  <div style="margin-top:10px; font-size:1rem;">
    Z√ºge: <span id="zugCounter">0</span>/6
  </div>
</div>

</div>

<script>
/* -------------------------
   GRUNDLOGIK
---------------------------- */

const faces = ["üòâ","üòµ‚Äçüí´","üòÅ","üòä","üò†","üòÇ","üòç","üò≤","üòö","üôÑ","üò¨","üôÇ"];
let selectedHand = null;
let headClicked = false;
let handClicked = false;
let currentFace = null;

let zuege = 0;
let maxZuege = 6;

let points = 0;
let gameStarted = false;
let kippStopp = false;

/* DOM */
const faceEl = document.getElementById("smileyFace");
const handEl = document.getElementById("smileyHand");
const comboRow = document.getElementById("comboRow");
const pointsDisplay = document.getElementById("pointsDisplay");
const zugCounter = document.getElementById("zugCounter");
const kippStopText = document.getElementById("kippStopText");

function randomInt(max){ return Math.floor(Math.random()*max); }

function applyFistRotation() {
  if (handEl.textContent === "üëä") {
    handEl.classList.add("fist");
  } else {
    handEl.classList.remove("fist");
  }
}

function clearSelections() {
  headClicked = false;
  handClicked = false;
  faceEl.classList.remove("selected");
  handEl.classList.remove("selected");
}

/* -------------------------
   KIPP-VORGABE NEU
---------------------------- */
function newCombo() {
  currentFace = faces[randomInt(faces.length)];
  faceEl.textContent = currentFace;

  handEl.textContent = selectedHand;
  applyFistRotation();

  clearSelections();

  comboRow.style.display = "flex";
  kippStopText.style.display = "none";
}

/* -------------------------
   GL√úCKSPUNKT-SOFORTLOGIK
---------------------------- */
function checkInstantPoint() {
  if (!gameStarted || kippStopp) return;

  if (headClicked && handClicked) {
    points += 1;
    pointsDisplay.textContent = points;

    clearSelections();
    newCombo();
  }
}

/* -------------------------
   ZUG ENDE LOGIK
---------------------------- */
function zugBeenden() {
  zuege++;
  zugCounter.textContent = zuege;

  if (zuege >= maxZuege) {
    kippStopp = true;
    comboRow.style.display = "none";
    kippStopText.style.display = "block";
  }
}

/* -------------------------
   BUTTON: ERKIPPT
---------------------------- */
document.getElementById("btnErkippt").onclick = () => {
  if (!gameStarted || kippStopp) return;

  if (headClicked) {
    points += 3;
  } else {
    points += 5;
  }
  pointsDisplay.textContent = points;

  zugBeenden();

  if (!kippStopp) newCombo();
};

/* -------------------------
   BUTTON: NICHT ERKIPPT
---------------------------- */
document.getElementById("btnNicht").onclick = () => {
  if (!gameStarted || kippStopp) return;

  zugBeenden();
  clearSelections();
};

/* -------------------------
   START
---------------------------- */
document.getElementById("btnStart").onclick = () => {
  // Beim Start wird eine Hand automatisch gesetzt (üñê)
  if (!selectedHand) selectedHand = "üñê";

  gameStarted = true;
  kippStopp = false;
  zuege = 0;
  zugCounter.textContent = "0";
  points = 0;
  pointsDisplay.textContent = "0";

  kippStopText.style.display = "none";

  newCombo();
};

/* -------------------------
   SCHLIE√üEN
---------------------------- */
document.getElementById("btnClose").onclick = () => {
  if (confirm("App wirklich schlie√üen?")) window.close();
};

/* -------------------------
   CLICK AUF KOPF / HAND
---------------------------- */
faceEl.onclick = () => {
  if (!gameStarted || kippStopp) return;

  headClicked = !headClicked;
  faceEl.classList.toggle("selected", headClicked);
  checkInstantPoint();
};

handEl.onclick = () => {
  if (!gameStarted || kippStopp) return;

  handClicked = !handClicked;
  handEl.classList.toggle("selected", handClicked);
  checkInstantPoint();
};
</script>

</body>
</html>
